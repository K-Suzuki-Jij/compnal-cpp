\hypertarget{integer_8hpp_source}{}\doxysection{integer.\+hpp}
\label{integer_8hpp_source}\index{src/utility/integer.hpp@{src/utility/integer.hpp}}
\mbox{\hyperlink{integer_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//  Copyright 2022 Kohei Suzuki}}
\DoxyCodeLine{2 \textcolor{comment}{//}}
\DoxyCodeLine{3 \textcolor{comment}{//  Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{4 \textcolor{comment}{//  you may not use this file except in compliance with the License.}}
\DoxyCodeLine{5 \textcolor{comment}{//  You may obtain a copy of the License at}}
\DoxyCodeLine{6 \textcolor{comment}{//}}
\DoxyCodeLine{7 \textcolor{comment}{//      http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{8 \textcolor{comment}{//}}
\DoxyCodeLine{9 \textcolor{comment}{//  Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{10 \textcolor{comment}{//  distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{11 \textcolor{comment}{//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{12 \textcolor{comment}{//  See the License for the specific language governing permissions and}}
\DoxyCodeLine{13 \textcolor{comment}{//  limitations under the License.}}
\DoxyCodeLine{14 \textcolor{comment}{//}}
\DoxyCodeLine{15 \textcolor{comment}{//  Created by Kohei Suzuki on 2021/11/07.}}
\DoxyCodeLine{16 \textcolor{comment}{//}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{preprocessor}{\#ifndef COMPNAL\_UTILITY\_INTEGER\_HPP\_}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#define COMPNAL\_UTILITY\_INTEGER\_HPP\_}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include <sstream>}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include <unordered\_map>}}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacecompnal}{compnal}} \{}
\DoxyCodeLine{27 \textcolor{keyword}{namespace }utility \{}
\DoxyCodeLine{28 }
\DoxyCodeLine{29 \textcolor{keywordtype}{void} \mbox{\hyperlink{namespacecompnal_1_1utility_a2580357fcc88b1c7bac5627e5b47925f}{GenerateIntegerPartition}}(std::vector<std::vector<int>> *results, \textcolor{keywordtype}{int} n, \textcolor{keywordtype}{int} max\_partition\_num) \{}
\DoxyCodeLine{30    }
\DoxyCodeLine{31    std::vector<int> temp\_vec;}
\DoxyCodeLine{32    }
\DoxyCodeLine{33    \textcolor{keywordflow}{if} (results-\/>size() > 0 \&\& n >= max\_partition\_num) \{}
\DoxyCodeLine{34       temp\_vec = results-\/>back();}
\DoxyCodeLine{35    \}}
\DoxyCodeLine{36    }
\DoxyCodeLine{37    \textcolor{keywordflow}{if} (results-\/>size() == 0 \&\& n == 0) \{}
\DoxyCodeLine{38       results-\/>push\_back(std::vector<int>());}
\DoxyCodeLine{39    \}}
\DoxyCodeLine{40    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n == 1) \{}
\DoxyCodeLine{41       \textcolor{keywordflow}{if} (results-\/>size() == 0) \{}
\DoxyCodeLine{42          results-\/>push\_back(std::vector<int>());}
\DoxyCodeLine{43       \}}
\DoxyCodeLine{44       results-\/>back().push\_back(1);}
\DoxyCodeLine{45    \}}
\DoxyCodeLine{46    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (max\_partition\_num == 1) \{}
\DoxyCodeLine{47       \textcolor{keywordflow}{if} (results-\/>size() == 0) \{}
\DoxyCodeLine{48          results-\/>push\_back(std::vector<int>());}
\DoxyCodeLine{49       \}}
\DoxyCodeLine{50       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < n; ++i) \{}
\DoxyCodeLine{51          results-\/>back().push\_back(1);}
\DoxyCodeLine{52       \}}
\DoxyCodeLine{53    \}}
\DoxyCodeLine{54    \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{55       \textcolor{keywordflow}{if} (n >= max\_partition\_num) \{}
\DoxyCodeLine{56          \textcolor{keywordflow}{if} (results-\/>size() == 0) \{}
\DoxyCodeLine{57             results-\/>push\_back(std::vector<int>());}
\DoxyCodeLine{58          \}}
\DoxyCodeLine{59          results-\/>back().push\_back(max\_partition\_num);}
\DoxyCodeLine{60          \mbox{\hyperlink{namespacecompnal_1_1utility_a2580357fcc88b1c7bac5627e5b47925f}{GenerateIntegerPartition}}(results, n -\/ max\_partition\_num, max\_partition\_num);}
\DoxyCodeLine{61          results-\/>push\_back(std::vector<int>());}
\DoxyCodeLine{62          \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&v: temp\_vec) \{}
\DoxyCodeLine{63             results-\/>back().push\_back(v);}
\DoxyCodeLine{64          \}}
\DoxyCodeLine{65       \}}
\DoxyCodeLine{66       \mbox{\hyperlink{namespacecompnal_1_1utility_a2580357fcc88b1c7bac5627e5b47925f}{GenerateIntegerPartition}}(results, n, max\_partition\_num -\/ 1);}
\DoxyCodeLine{67    \}}
\DoxyCodeLine{68 \}}
\DoxyCodeLine{69 }
\DoxyCodeLine{70 }
\DoxyCodeLine{71 std::int64\_t \mbox{\hyperlink{namespacecompnal_1_1utility_ae746f2f70fd507d6b7a7f6ffabdcdee3}{CalculateBinomialCoefficient}}(\textcolor{keywordtype}{int} n, \textcolor{keyword}{const} \textcolor{keywordtype}{int} k) \{}
\DoxyCodeLine{72    \textcolor{keywordflow}{if} (n < 0 || k < 0) \{}
\DoxyCodeLine{73       std::stringstream ss;}
\DoxyCodeLine{74       ss << \textcolor{stringliteral}{"{}Error in "{}} << \_\_func\_\_ << std::endl;}
\DoxyCodeLine{75       \textcolor{keywordflow}{throw} std::runtime\_error(ss.str());}
\DoxyCodeLine{76    \}}
\DoxyCodeLine{77    }
\DoxyCodeLine{78    std::int64\_t r = 1;}
\DoxyCodeLine{79    }
\DoxyCodeLine{80    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} d = 1; d <= k; d++) \{}
\DoxyCodeLine{81        r *= n-\/-\/;}
\DoxyCodeLine{82        r /= d;}
\DoxyCodeLine{83    \}}
\DoxyCodeLine{84    }
\DoxyCodeLine{85    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{86    }
\DoxyCodeLine{87 \}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89 std::vector<std::vector<std::int64\_t>> \mbox{\hyperlink{namespacecompnal_1_1utility_a4cce9c29a3548fefaf4814bc1bfd0345}{CalculateBinomialTable}}(\textcolor{keywordtype}{int} N) \{}
\DoxyCodeLine{90    std::vector<std::vector<std::int64\_t>> vec(N + 1, std::vector<std::int64\_t>(N + 1));}
\DoxyCodeLine{91    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i <= N; ++i) \{}
\DoxyCodeLine{92       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j <= i; j++) \{}
\DoxyCodeLine{93          \textcolor{keywordflow}{if} (j == 0 || j == i) \{}
\DoxyCodeLine{94             vec[i][j] = 1;}
\DoxyCodeLine{95          \}}
\DoxyCodeLine{96          \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{97             vec[i][j] = vec[i -\/ 1][j -\/ 1] + vec[i -\/ 1][j];}
\DoxyCodeLine{98          \}}
\DoxyCodeLine{99       \}}
\DoxyCodeLine{100    \}}
\DoxyCodeLine{101    \textcolor{keywordflow}{return} vec;}
\DoxyCodeLine{102 \}}
\DoxyCodeLine{103 }
\DoxyCodeLine{104 std::int64\_t \mbox{\hyperlink{namespacecompnal_1_1utility_a31be084029ddf129959d1682fd54cdf5}{CalculateNumCombination}}(\textcolor{keyword}{const} std::vector<int> \&list) \{}
\DoxyCodeLine{105    }
\DoxyCodeLine{106    std::unordered\_map<int, int> u\_map;}
\DoxyCodeLine{107    }
\DoxyCodeLine{108    \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&it: list) \{}
\DoxyCodeLine{109       u\_map[it]++;}
\DoxyCodeLine{110    \}}
\DoxyCodeLine{111    }
\DoxyCodeLine{112    std::int64\_t result = 1;}
\DoxyCodeLine{113    \textcolor{keywordtype}{int} size\_list = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(list.size());}
\DoxyCodeLine{114    }
\DoxyCodeLine{115    \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&it: u\_map) \{}
\DoxyCodeLine{116       result *= \mbox{\hyperlink{namespacecompnal_1_1utility_ae746f2f70fd507d6b7a7f6ffabdcdee3}{CalculateBinomialCoefficient}}(size\_list, it.second);}
\DoxyCodeLine{117       size\_list -\/= it.second;}
\DoxyCodeLine{118    \}}
\DoxyCodeLine{119    }
\DoxyCodeLine{120    \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{121    }
\DoxyCodeLine{122 \}}
\DoxyCodeLine{123 }
\DoxyCodeLine{124 \textcolor{keywordtype}{void} \mbox{\hyperlink{namespacecompnal_1_1utility_a6d7737688a03ef322d62fc96017af67a}{CalculateNthPermutation}}(std::vector<int> *vec, std::int64\_t target\_num) \{}
\DoxyCodeLine{125    }
\DoxyCodeLine{126    std::map<int, int> u\_map;}
\DoxyCodeLine{127    }
\DoxyCodeLine{128    \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&it: *vec) \{}
\DoxyCodeLine{129       u\_map[it]++;}
\DoxyCodeLine{130    \}}
\DoxyCodeLine{131    }
\DoxyCodeLine{132    \textcolor{keywordtype}{int} size\_vec = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(vec-\/>size());}
\DoxyCodeLine{133    }
\DoxyCodeLine{134    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < size\_vec; ++i) \{}
\DoxyCodeLine{135       std::int64\_t temp1 = 0;}
\DoxyCodeLine{136       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&\&it: u\_map) \{}
\DoxyCodeLine{137          \textcolor{keywordflow}{if} (it.second > 0) \{}
\DoxyCodeLine{138             it.second -\/= 1;}
\DoxyCodeLine{139             std::int64\_t temp2 = 1;}
\DoxyCodeLine{140             \textcolor{keywordtype}{int} size = size\_vec -\/ (i + 1);}
\DoxyCodeLine{141             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} it2: u\_map) \{}
\DoxyCodeLine{142                temp2 *= \mbox{\hyperlink{namespacecompnal_1_1utility_ae746f2f70fd507d6b7a7f6ffabdcdee3}{CalculateBinomialCoefficient}}(size, it2.second);}
\DoxyCodeLine{143                size  -\/= it2.second;}
\DoxyCodeLine{144             \}}
\DoxyCodeLine{145             temp1 += temp2;}
\DoxyCodeLine{146             \textcolor{keywordflow}{if} (temp1 > target\_num) \{}
\DoxyCodeLine{147                (*vec)[i] = it.first;}
\DoxyCodeLine{148                temp1 -\/= temp2;}
\DoxyCodeLine{149                \textcolor{keywordflow}{break};}
\DoxyCodeLine{150             \}}
\DoxyCodeLine{151             it.second += 1;}
\DoxyCodeLine{152          \}}
\DoxyCodeLine{153       \}}
\DoxyCodeLine{154       target\_num -\/= temp1;}
\DoxyCodeLine{155    \}}
\DoxyCodeLine{156    }
\DoxyCodeLine{157    \textcolor{keywordflow}{if} (target\_num != 0) \{}
\DoxyCodeLine{158       std::stringstream ss;}
\DoxyCodeLine{159       ss << \textcolor{stringliteral}{"{}Error in "{}} << \_\_FUNCTION\_\_ << \textcolor{stringliteral}{"{} at "{}} << \_\_LINE\_\_ << std::endl;}
\DoxyCodeLine{160       ss << \textcolor{stringliteral}{"{}Can't find corresponding permutation, "{}} << target\_num << std::endl;}
\DoxyCodeLine{161       \textcolor{keywordflow}{throw} std::runtime\_error(ss.str());}
\DoxyCodeLine{162    \}}
\DoxyCodeLine{163    }
\DoxyCodeLine{164 \}}
\DoxyCodeLine{165 }
\DoxyCodeLine{166 \}}
\DoxyCodeLine{167 \}}
\DoxyCodeLine{168 }
\DoxyCodeLine{169 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* COMPNAL\_UTILITY\_INTEGER\_HPP\_ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
