\hypertarget{test_8hpp_source}{}\doxysection{test.\+hpp}
\label{test_8hpp_source}\index{tests/utility/test.hpp@{tests/utility/test.hpp}}
\mbox{\hyperlink{test_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//  Copyright 2022 Kohei Suzuki}}
\DoxyCodeLine{2 \textcolor{comment}{//}}
\DoxyCodeLine{3 \textcolor{comment}{//  Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{4 \textcolor{comment}{//  you may not use this file except in compliance with the License.}}
\DoxyCodeLine{5 \textcolor{comment}{//  You may obtain a copy of the License at}}
\DoxyCodeLine{6 \textcolor{comment}{//}}
\DoxyCodeLine{7 \textcolor{comment}{//      http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{8 \textcolor{comment}{//}}
\DoxyCodeLine{9 \textcolor{comment}{//  Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{10 \textcolor{comment}{//  distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{11 \textcolor{comment}{//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{12 \textcolor{comment}{//  See the License for the specific language governing permissions and}}
\DoxyCodeLine{13 \textcolor{comment}{//  limitations under the License.}}
\DoxyCodeLine{14 \textcolor{comment}{//}}
\DoxyCodeLine{15 \textcolor{comment}{//  Created by Kohei Suzuki on 2022/01/08.}}
\DoxyCodeLine{16 \textcolor{comment}{//}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{preprocessor}{\#ifndef COMPNAL\_TEST\_UTILITY\_TEST\_HPP\_}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#define COMPNAL\_TEST\_UTILITY\_TEST\_HPP\_}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include "{}../../src/sparse\_matrix/all.hpp"{}}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include <unordered\_map>}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <gtest/gtest.h>}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacecompnal}{compnal}} \{}
\DoxyCodeLine{26 \textcolor{keyword}{namespace }test \{}
\DoxyCodeLine{27 }
\DoxyCodeLine{28 \textcolor{keyword}{template}<\textcolor{keyword}{class} MapType>}
\DoxyCodeLine{29 \textcolor{keywordtype}{void} \mbox{\hyperlink{namespacecompnal_1_1test_ac10a748d750a721db72cc022511fc7e0}{ExpectEQ}}(\textcolor{keyword}{const} MapType \&lhs, \textcolor{keyword}{const} MapType \&rhs) \{}
\DoxyCodeLine{30    \textcolor{keywordflow}{if} (lhs.size() != rhs.size()) \{}
\DoxyCodeLine{31       FAIL();}
\DoxyCodeLine{32    \}}
\DoxyCodeLine{33    \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&it: lhs) \{}
\DoxyCodeLine{34       \textcolor{keywordflow}{if} (rhs.count(it.first) == 1) \{}
\DoxyCodeLine{35          \textcolor{keywordflow}{if} (rhs.at(it.first) != it.second) \{}
\DoxyCodeLine{36             FAIL();}
\DoxyCodeLine{37          \}}
\DoxyCodeLine{38       \}}
\DoxyCodeLine{39       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{40          FAIL();}
\DoxyCodeLine{41       \}}
\DoxyCodeLine{42    \}}
\DoxyCodeLine{43    \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&it: rhs) \{}
\DoxyCodeLine{44       \textcolor{keywordflow}{if} (lhs.count(it.first) == 1) \{}
\DoxyCodeLine{45          \textcolor{keywordflow}{if} (lhs.at(it.first) != it.second) \{}
\DoxyCodeLine{46             FAIL();}
\DoxyCodeLine{47          \}}
\DoxyCodeLine{48       \}}
\DoxyCodeLine{49       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{50          FAIL();}
\DoxyCodeLine{51       \}}
\DoxyCodeLine{52    \}}
\DoxyCodeLine{53    SUCCEED();}
\DoxyCodeLine{54 \}}
\DoxyCodeLine{55 }
\DoxyCodeLine{56 \textcolor{keyword}{template}<\textcolor{keyword}{typename} IndexType, \textcolor{keyword}{typename} ValueType>}
\DoxyCodeLine{57 \textcolor{keywordtype}{void} \mbox{\hyperlink{namespacecompnal_1_1test_ae1279c7fc79a6110087f16a3fbe9258f}{ExpectNear}}(\textcolor{keyword}{const} std::unordered\_map<IndexType, ValueType> \&lhs, \textcolor{keyword}{const} std::unordered\_map<IndexType, ValueType> \&rhs, \textcolor{keyword}{const} \textcolor{keywordtype}{double} threshold) \{}
\DoxyCodeLine{58    \textcolor{keywordflow}{if} (lhs.size() != rhs.size()) \{}
\DoxyCodeLine{59       FAIL();}
\DoxyCodeLine{60    \}}
\DoxyCodeLine{61    \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&it: lhs) \{}
\DoxyCodeLine{62       \textcolor{keywordflow}{if} (rhs.count(it.first) == 1) \{}
\DoxyCodeLine{63          \textcolor{keywordflow}{if} (std::abs(rhs.at(it.first) -\/ it.second) > threshold) \{}
\DoxyCodeLine{64             FAIL();}
\DoxyCodeLine{65          \}}
\DoxyCodeLine{66       \}}
\DoxyCodeLine{67       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{68          FAIL();}
\DoxyCodeLine{69       \}}
\DoxyCodeLine{70    \}}
\DoxyCodeLine{71    \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&it: rhs) \{}
\DoxyCodeLine{72       \textcolor{keywordflow}{if} (lhs.count(it.first) == 1) \{}
\DoxyCodeLine{73          \textcolor{keywordflow}{if} (std::abs(lhs.at(it.first) -\/ it.second) > threshold) \{}
\DoxyCodeLine{74             FAIL();}
\DoxyCodeLine{75          \}}
\DoxyCodeLine{76       \}}
\DoxyCodeLine{77       \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{78          FAIL();}
\DoxyCodeLine{79       \}}
\DoxyCodeLine{80    \}}
\DoxyCodeLine{81    SUCCEED();}
\DoxyCodeLine{82 \}}
\DoxyCodeLine{83 }
\DoxyCodeLine{84 \textcolor{keyword}{template}<\textcolor{keyword}{typename} RealType>}
\DoxyCodeLine{85 \textcolor{keywordtype}{void} \mbox{\hyperlink{namespacecompnal_1_1test_ae1279c7fc79a6110087f16a3fbe9258f}{ExpectNear}}(\textcolor{keyword}{const} \mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s}{compnal::sparse\_matrix::CRS<RealType>}} \&lhs, \textcolor{keyword}{const} \mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s}{compnal::sparse\_matrix::CRS<RealType>}} \&rhs, \textcolor{keyword}{const} RealType threshold) \{}
\DoxyCodeLine{86    \textcolor{keywordflow}{if} (lhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_a4fb8bf6ab46de248b22f7f56ce3298ba}{row\_dim}} != rhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_a4fb8bf6ab46de248b22f7f56ce3298ba}{row\_dim}}) \{}
\DoxyCodeLine{87       FAIL();}
\DoxyCodeLine{88    \}}
\DoxyCodeLine{89    \textcolor{keywordflow}{if} (lhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_af44d3f5b32bfe8204854cf9bd70349ee}{col\_dim}} != rhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_af44d3f5b32bfe8204854cf9bd70349ee}{col\_dim}}) \{}
\DoxyCodeLine{90       FAIL();}
\DoxyCodeLine{91    \}}
\DoxyCodeLine{92    \textcolor{keywordflow}{if} (lhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_a7c3c574b5fe94de93551f90ae9017cf0}{row}}.size() != rhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_a7c3c574b5fe94de93551f90ae9017cf0}{row}}.size()) \{}
\DoxyCodeLine{93       FAIL();}
\DoxyCodeLine{94    \}}
\DoxyCodeLine{95    \textcolor{keywordflow}{if} (lhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_a6e745b9eae6656c2210783e1e9d1d2b7}{tag}} != rhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_a6e745b9eae6656c2210783e1e9d1d2b7}{tag}}) \{}
\DoxyCodeLine{96       FAIL();}
\DoxyCodeLine{97    \}}
\DoxyCodeLine{98    \textcolor{keywordflow}{for} (std::size\_t i = 0; i < lhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_a7c3c574b5fe94de93551f90ae9017cf0}{row}}.size(); ++i) \{}
\DoxyCodeLine{99       \textcolor{keywordflow}{if} (lhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_a7c3c574b5fe94de93551f90ae9017cf0}{row}}[i] != rhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_a7c3c574b5fe94de93551f90ae9017cf0}{row}}[i]) \{}
\DoxyCodeLine{100          FAIL();}
\DoxyCodeLine{101       \}}
\DoxyCodeLine{102    \}}
\DoxyCodeLine{103    \textcolor{keywordflow}{if} (lhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_aa1ac4274734dffa2a97dd9b4a12f7302}{col}}.size() != rhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_aa1ac4274734dffa2a97dd9b4a12f7302}{col}}.size()) \{}
\DoxyCodeLine{104       FAIL();}
\DoxyCodeLine{105    \}}
\DoxyCodeLine{106    \textcolor{keywordflow}{for} (std::size\_t i = 0; i < lhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_aa1ac4274734dffa2a97dd9b4a12f7302}{col}}.size(); ++i) \{}
\DoxyCodeLine{107       \textcolor{keywordflow}{if} (lhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_aa1ac4274734dffa2a97dd9b4a12f7302}{col}}[i] != rhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_aa1ac4274734dffa2a97dd9b4a12f7302}{col}}[i]) \{}
\DoxyCodeLine{108          FAIL();}
\DoxyCodeLine{109       \}}
\DoxyCodeLine{110    \}}
\DoxyCodeLine{111    \textcolor{keywordflow}{if} (lhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_ad7d38a64390cfa0a645d635d396660ed}{val}}.size() != rhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_ad7d38a64390cfa0a645d635d396660ed}{val}}.size()) \{}
\DoxyCodeLine{112       FAIL();}
\DoxyCodeLine{113    \}}
\DoxyCodeLine{114    \textcolor{keywordflow}{for} (std::size\_t i = 0; i < lhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_ad7d38a64390cfa0a645d635d396660ed}{val}}.size(); ++i) \{}
\DoxyCodeLine{115       \textcolor{keywordflow}{if} (std::abs(lhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_ad7d38a64390cfa0a645d635d396660ed}{val}}[i] -\/ rhs.\mbox{\hyperlink{structcompnal_1_1sparse__matrix_1_1_c_r_s_ad7d38a64390cfa0a645d635d396660ed}{val}}[i]) > threshold) \{}
\DoxyCodeLine{116          FAIL();}
\DoxyCodeLine{117       \}}
\DoxyCodeLine{118    \}}
\DoxyCodeLine{119    SUCCEED();}
\DoxyCodeLine{120 \}}
\DoxyCodeLine{121 }
\DoxyCodeLine{122 \}}
\DoxyCodeLine{123 \} \textcolor{comment}{//Test}}
\DoxyCodeLine{124 }
\DoxyCodeLine{125 }
\DoxyCodeLine{126 }
\DoxyCodeLine{127 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* COMPNAL\_TEST\_UTILITY\_TEST\_HPP\_ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
